# ==========================================================
# ShellCrash é…ç½®æ–‡ä»¶ (æ— é”šç‚¹ç¨³å®šç‰ˆ)
# ==========================================================

# --- 1. åŸºç¡€è®¾ç½® ---
mixed-port: 7890
redir-port: 7892
tproxy-port: 7893
allow-lan: true
mode: Rule
log-level: info
ipv6: true
external-controller: :9999
external-ui: ui
secret: ""
tun: {enable: true, stack: system, device: utun, auto-route: false, auto-detect-interface: false}
experimental: {ignore-resolve-fail: true, interface-name: en0}
unified-delay: true
tcp-concurrent: true
global-client-fingerprint: chrome

profile:
  store-selected: true
  store-fake-ip: true

# --- 2. ä»£ç†è®¢é˜…æº (è¯·ç¡®è®¤ URL æ˜¯å¦æœ€æ–°) ---
proxy-providers:
  MyAirport:
    type: http
    # ä¸‹é¢æ˜¯ä½ çš„è®¢é˜…é“¾æ¥ï¼Œå¦‚æœå¤±æ•ˆè¯·æ‰‹åŠ¨æ›¿æ¢
    url: ""
    interval: 3600
    path: ./proxies/airport.yaml
    health-check:
      enable: true
      interval: 600
      url: http://www.gstatic.com/generate_204

# --- 3. DNS è®¾ç½® ---
dns:
  enable: true
  listen: :1053
  use-hosts: true
  ipv6: true
  default-nameserver: [ 223.5.5.5, 119.29.29.29 ]
  enhanced-mode: fake-ip
  fake-ip-range: 198.18.0.1/16
  respect-rules: true
  nameserver-policy:
    "geosite:cn": [223.5.5.5, 119.29.29.29]
  proxy-server-nameserver: [223.5.5.5, 119.29.29.29]
  nameserver:
    - https://dns.alidns.com/dns-query
    - https://doh.pub/dns-query
  fake-ip-filter:
    - '*'
    - '+.lan'
    - '+.local'
    - '+.market.xiaomi.com'
    - 'geosite:cn'

# --- 4. ç­–ç•¥ç»„ (ä¸¥æ ¼æŒ‰ç…§ä½ çš„è¦æ±‚åˆ†ç»„) ---
proxy-groups:
  # [æ–°å¢] IPv6 æµ‹è¯•ç»„
  # æµ‹é€Ÿ URL ä¸ºçº¯ IPv6 åœ°å€ï¼Œèƒ½é€š=æ”¯æŒ IPv6ï¼Œæ˜¾ç¤ºè¶…æ—¶=ä¸æ”¯æŒ
  - name: ğŸ§ª IPv6 æµ‹è¯•
    type: select
    use: [MyAirport]
    url: 'http://ipv6.google.com/generate_204'
    interval: 300

  # [ä¸šåŠ¡ç»„] é»˜è®¤ä»£ç†
  - name: ğŸš€ é»˜è®¤ä»£ç†
    type: select
    proxies: [ğŸ”¯ é¦™æ¸¯æ•…è½¬, ğŸ”¯ æ—¥æœ¬æ•…è½¬, ğŸ”¯ ç‹®åŸæ•…è½¬, ğŸ”¯ ç¾å›½æ•…è½¬, â™»ï¸ é¦™æ¸¯è‡ªåŠ¨, â™»ï¸ æ—¥æœ¬è‡ªåŠ¨, â™»ï¸ ç‹®åŸè‡ªåŠ¨, â™»ï¸ ç¾å›½è‡ªåŠ¨, â™»ï¸ è‡ªåŠ¨é€‰æ‹©, ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹, ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹, ğŸ‡¸ğŸ‡¬ ç‹®åŸèŠ‚ç‚¹, ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹, ğŸŒ å…¨éƒ¨èŠ‚ç‚¹, DIRECT]

  # [ä¸šåŠ¡ç»„] è§†é¢‘åª’ä½“
  - name: ğŸ“¹ YouTube
    type: select
    proxies: [ğŸ”¯ é¦™æ¸¯æ•…è½¬, ğŸ”¯ ç¾å›½æ•…è½¬, ğŸ”¯ æ—¥æœ¬æ•…è½¬, ğŸ”¯ ç‹®åŸæ•…è½¬, â™»ï¸ ç¾å›½è‡ªåŠ¨, â™»ï¸ é¦™æ¸¯è‡ªåŠ¨, â™»ï¸ æ—¥æœ¬è‡ªåŠ¨, â™»ï¸ ç‹®åŸè‡ªåŠ¨, â™»ï¸ è‡ªåŠ¨é€‰æ‹©, ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹, ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹, ğŸ‡¸ğŸ‡¬ ç‹®åŸèŠ‚ç‚¹, ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹, ğŸŒ å…¨éƒ¨èŠ‚ç‚¹, DIRECT]
  
  - name: ğŸ¥ NETFLIX
    type: select
    proxies: [ğŸ”¯ ç‹®åŸæ•…è½¬, ğŸ”¯ é¦™æ¸¯æ•…è½¬, ğŸ”¯ æ—¥æœ¬æ•…è½¬, ğŸ”¯ ç¾å›½æ•…è½¬, â™»ï¸ é¦™æ¸¯è‡ªåŠ¨, â™»ï¸ æ—¥æœ¬è‡ªåŠ¨, â™»ï¸ ç‹®åŸè‡ªåŠ¨, â™»ï¸ ç¾å›½è‡ªåŠ¨, â™»ï¸ è‡ªåŠ¨é€‰æ‹©, ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹, ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹, ğŸ‡¸ğŸ‡¬ ç‹®åŸèŠ‚ç‚¹, ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹, ğŸŒ å…¨éƒ¨èŠ‚ç‚¹, DIRECT]

  - name: ğŸ¬ Emby
    type: select
    proxies: [DIRECT, ğŸš€ é»˜è®¤ä»£ç†, ğŸ”¯ é¦™æ¸¯æ•…è½¬, ğŸ”¯ ç‹®åŸæ•…è½¬, ğŸŒ å…¨éƒ¨èŠ‚ç‚¹]

  - name: ğŸµ TikTok
    type: select
    proxies: [ğŸ”¯ æ—¥æœ¬æ•…è½¬, ğŸ”¯ ç‹®åŸæ•…è½¬, ğŸ”¯ ç¾å›½æ•…è½¬, â™»ï¸ é¦™æ¸¯è‡ªåŠ¨, â™»ï¸ æ—¥æœ¬è‡ªåŠ¨, â™»ï¸ ç‹®åŸè‡ªåŠ¨, â™»ï¸ ç¾å›½è‡ªåŠ¨, â™»ï¸ è‡ªåŠ¨é€‰æ‹©, ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹, ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹, ğŸ‡¸ğŸ‡¬ ç‹®åŸèŠ‚ç‚¹, ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹, ğŸŒ å…¨éƒ¨èŠ‚ç‚¹, DIRECT]

  - name: ğŸµ Spotify
    type: select
    proxies: [ğŸ”¯ ç¾å›½æ•…è½¬, ğŸ”¯ é¦™æ¸¯æ•…è½¬, ğŸ”¯ ç‹®åŸæ•…è½¬, ğŸ”¯ æ—¥æœ¬æ•…è½¬, â™»ï¸ è‡ªåŠ¨é€‰æ‹©, ğŸŒ å…¨éƒ¨èŠ‚ç‚¹, DIRECT]

  # [ä¸šåŠ¡ç»„] å¸¸ç”¨æœåŠ¡
  - name: ğŸ€ Google
    type: select
    proxies: [ğŸ”¯ é¦™æ¸¯æ•…è½¬, ğŸ”¯ æ—¥æœ¬æ•…è½¬, ğŸ”¯ ç‹®åŸæ•…è½¬, ğŸ”¯ ç¾å›½æ•…è½¬, â™»ï¸ é¦™æ¸¯è‡ªåŠ¨, â™»ï¸ æ—¥æœ¬è‡ªåŠ¨, â™»ï¸ ç‹®åŸè‡ªåŠ¨, â™»ï¸ ç¾å›½è‡ªåŠ¨, â™»ï¸ è‡ªåŠ¨é€‰æ‹©, ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹, ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹, ğŸ‡¸ğŸ‡¬ ç‹®åŸèŠ‚ç‚¹, ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹, ğŸŒ å…¨éƒ¨èŠ‚ç‚¹, DIRECT]

  - name: ğŸ¤– AI
    type: select
    proxies: [ğŸ”¯ ç¾å›½æ•…è½¬, ğŸ”¯ æ—¥æœ¬æ•…è½¬, ğŸ”¯ ç‹®åŸæ•…è½¬, â™»ï¸ é¦™æ¸¯è‡ªåŠ¨, â™»ï¸ æ—¥æœ¬è‡ªåŠ¨, â™»ï¸ ç‹®åŸè‡ªåŠ¨, â™»ï¸ ç¾å›½è‡ªåŠ¨, â™»ï¸ è‡ªåŠ¨é€‰æ‹©, ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹, ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹, ğŸ‡¸ğŸ‡¬ ç‹®åŸèŠ‚ç‚¹, ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹, ğŸŒ å…¨éƒ¨èŠ‚ç‚¹, DIRECT]

  - name: ğŸ‘¨ğŸ¿â€ğŸ’» GitHub
    type: select
    proxies: [ğŸ”¯ é¦™æ¸¯æ•…è½¬, ğŸ”¯ æ—¥æœ¬æ•…è½¬, ğŸ”¯ ç‹®åŸæ•…è½¬, ğŸ”¯ ç¾å›½æ•…è½¬, â™»ï¸ é¦™æ¸¯è‡ªåŠ¨, â™»ï¸ æ—¥æœ¬è‡ªåŠ¨, â™»ï¸ ç‹®åŸè‡ªåŠ¨, â™»ï¸ ç¾å›½è‡ªåŠ¨, â™»ï¸ è‡ªåŠ¨é€‰æ‹©, ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹, ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹, ğŸ‡¸ğŸ‡¬ ç‹®åŸèŠ‚ç‚¹, ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹, ğŸŒ å…¨éƒ¨èŠ‚ç‚¹, DIRECT]

  - name: ğŸ“² Telegram
    type: select
    proxies: [ğŸ”¯ é¦™æ¸¯æ•…è½¬, ğŸ”¯ æ—¥æœ¬æ•…è½¬, ğŸ”¯ ç‹®åŸæ•…è½¬, ğŸ”¯ ç¾å›½æ•…è½¬, â™»ï¸ é¦™æ¸¯è‡ªåŠ¨, â™»ï¸ æ—¥æœ¬è‡ªåŠ¨, â™»ï¸ ç‹®åŸè‡ªåŠ¨, â™»ï¸ ç¾å›½è‡ªåŠ¨, â™»ï¸ è‡ªåŠ¨é€‰æ‹©, ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹, ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹, ğŸ‡¸ğŸ‡¬ ç‹®åŸèŠ‚ç‚¹, ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹, ğŸŒ å…¨éƒ¨èŠ‚ç‚¹, DIRECT]

  # [ä¸šåŠ¡ç»„] å¾®è½¯æœåŠ¡
  - name: ğŸ¬ OneDrive
    type: select
    proxies: [DIRECT, ğŸ”¯ æ—¥æœ¬æ•…è½¬, ğŸ”¯ ç‹®åŸæ•…è½¬, ğŸ”¯ ç¾å›½æ•…è½¬, â™»ï¸ é¦™æ¸¯è‡ªåŠ¨, â™»ï¸ æ—¥æœ¬è‡ªåŠ¨, â™»ï¸ ç‹®åŸè‡ªåŠ¨, â™»ï¸ ç¾å›½è‡ªåŠ¨, â™»ï¸ è‡ªåŠ¨é€‰æ‹©, ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹, ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹, ğŸ‡¸ğŸ‡¬ ç‹®åŸèŠ‚ç‚¹, ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹, ğŸŒ å…¨éƒ¨èŠ‚ç‚¹]

  - name: ğŸªŸ Microsoft
    type: select
    proxies: [DIRECT, ğŸ”¯ æ—¥æœ¬æ•…è½¬, ğŸ”¯ ç‹®åŸæ•…è½¬, ğŸ”¯ ç¾å›½æ•…è½¬, â™»ï¸ é¦™æ¸¯è‡ªåŠ¨, â™»ï¸ æ—¥æœ¬è‡ªåŠ¨, â™»ï¸ ç‹®åŸè‡ªåŠ¨, â™»ï¸ ç¾å›½è‡ªåŠ¨, â™»ï¸ è‡ªåŠ¨é€‰æ‹©, ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹, ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹, ğŸ‡¸ğŸ‡¬ ç‹®åŸèŠ‚ç‚¹, ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹, ğŸŒ å…¨éƒ¨èŠ‚ç‚¹]

  - name: ğŸŸ æ¼ç½‘ä¹‹é±¼
    type: select
    proxies: [ğŸš€ é»˜è®¤ä»£ç†, DIRECT]

  # [åº•å±‚ç»„] åœ°åŒºç­›é€‰ (Regex)
  - name: ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹
    type: select
    use: [MyAirport]
    filter: "(?=.*(æ¸¯|HK|(?i)Hong))^((?!(å°|æ—¥|éŸ©|æ–°|æ·±|ç¾)).)*$"
  
  - name: ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹
    type: select
    use: [MyAirport]
    filter: "(?=.*(æ—¥|JP|(?i)Japan))^((?!(æ¸¯|å°|éŸ©|æ–°|ç¾)).)*$"

  - name: ğŸ‡¸ğŸ‡¬ ç‹®åŸèŠ‚ç‚¹
    type: select
    use: [MyAirport]
    filter: "(?=.*(æ–°åŠ å¡|å¡|ç‹®åŸ|SG|Singapore))^((?!(å°|æ—¥|éŸ©|æ·±|ç¾)).)*$"

  - name: ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹
    type: select
    use: [MyAirport]
    filter: "(?=.*(ç¾|US|(?i)States|America))^((?!(æ¸¯|å°|éŸ©|æ–°|æ—¥)).)*$"
  
  # [åº•å±‚ç»„] æ•…éšœè½¬ç§» (Fallback)
  - name: ğŸ”¯ é¦™æ¸¯æ•…è½¬
    type: fallback
    use: [MyAirport]
    interval: 300
    url: 'http://www.gstatic.com/generate_204'
    filter: "(?=.*(æ¸¯|HK|(?i)Hong))^((?!(å°|æ—¥|éŸ©|æ–°|æ·±|ç¾)).)*$"

  - name: ğŸ”¯ æ—¥æœ¬æ•…è½¬
    type: fallback
    use: [MyAirport]
    interval: 300
    url: 'http://www.gstatic.com/generate_204'
    filter: "(?=.*(æ—¥|JP|(?i)Japan))^((?!(æ¸¯|å°|éŸ©|æ–°|ç¾)).)*$"

  - name: ğŸ”¯ ç‹®åŸæ•…è½¬
    type: fallback
    use: [MyAirport]
    interval: 300
    url: 'http://www.gstatic.com/generate_204'
    filter: "(?=.*(æ–°åŠ å¡|å¡|ç‹®åŸ|SG|Singapore))^((?!(å°|æ—¥|éŸ©|æ·±|ç¾)).)*$"

  - name: ğŸ”¯ ç¾å›½æ•…è½¬
    type: fallback
    use: [MyAirport]
    interval: 300
    url: 'http://www.gstatic.com/generate_204'
    filter: "(?=.*(ç¾|US|(?i)States|America))^((?!(æ¸¯|å°|éŸ©|æ–°|æ—¥)).)*$"

  # [åº•å±‚ç»„] è‡ªåŠ¨æµ‹é€Ÿ (Url-Test)
  - name: â™»ï¸ é¦™æ¸¯è‡ªåŠ¨
    type: url-test
    use: [MyAirport]
    tolerance: 20
    interval: 300
    url: 'http://www.gstatic.com/generate_204'
    filter: "(?=.*(æ¸¯|HK|(?i)Hong))^((?!(å°|æ—¥|éŸ©|æ–°|æ·±|ç¾)).)*$"

  - name: â™»ï¸ æ—¥æœ¬è‡ªåŠ¨
    type: url-test
    use: [MyAirport]
    tolerance: 20
    interval: 300
    url: 'http://www.gstatic.com/generate_204'
    filter: "(?=.*(æ—¥|JP|(?i)Japan))^((?!(æ¸¯|å°|éŸ©|æ–°|ç¾)).)*$"

  - name: â™»ï¸ ç‹®åŸè‡ªåŠ¨
    type: url-test
    use: [MyAirport]
    tolerance: 20
    interval: 300
    url: 'http://www.gstatic.com/generate_204'
    filter: "(?=.*(æ–°åŠ å¡|å¡|ç‹®åŸ|SG|Singapore))^((?!(æ¸¯|å°|éŸ©|æ—¥|ç¾)).)*$"

  - name: â™»ï¸ ç¾å›½è‡ªåŠ¨
    type: url-test
    use: [MyAirport]
    tolerance: 20
    interval: 300
    url: 'http://www.gstatic.com/generate_204'
    filter: "(?=.*(ç¾|US|(?i)States|America))^((?!(æ¸¯|å°|æ—¥|éŸ©|æ–°)).)*$"

  - name: â™»ï¸ è‡ªåŠ¨é€‰æ‹©
    type: url-test
    use: [MyAirport]
    tolerance: 20
    interval: 300
    url: 'http://www.gstatic.com/generate_204'

  - name: ğŸŒ å…¨éƒ¨èŠ‚ç‚¹
    type: select
    use: [MyAirport]

# --- 5. è§„åˆ™é›†é…ç½® (å·²å®Œå…¨å±•å¼€ï¼Œé˜²æ­¢é”šç‚¹æŠ¥é”™) ---
rule-providers: 
  private_domain:
    type: http
    interval: 86400
    behavior: domain
    format: mrs
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/private.mrs"
  
  proxylite:
    type: http
    interval: 86400
    behavior: classical
    format: mrs
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/proxy.mrs"
  
  ai:
    type: http
    interval: 86400
    behavior: domain
    format: mrs
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/category-ai-!cn.mrs"
  
  youtube_domain:
    type: http
    interval: 86400
    behavior: domain
    format: mrs
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/youtube.mrs"
  
  google_domain:
    type: http
    interval: 86400
    behavior: domain
    format: mrs
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/google.mrs"
  
  github_domain:
    type: http
    interval: 86400
    behavior: domain
    format: mrs
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/github.mrs"
  
  telegram_domain:
    type: http
    interval: 86400
    behavior: domain
    format: mrs
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/telegram.mrs"
  
  netflix_domain:
    type: http
    interval: 86400
    behavior: domain
    format: mrs
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/netflix.mrs"
  
  onedrive_domain:
    type: http
    interval: 86400
    behavior: domain
    format: mrs
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/onedrive.mrs"
  
  microsoft_domain:
    type: http
    interval: 86400
    behavior: domain
    format: mrs
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/microsoft.mrs"
  
  apple_domain:
    type: http
    interval: 86400
    behavior: domain
    format: mrs
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/apple.mrs"
  
  spotify:
    type: http
    interval: 86400
    behavior: classical
    format: mrs
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/spotify.mrs"
  
  emby:
    type: http
    interval: 86400
    behavior: classical
    format: mrs
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/emby.mrs"
  
  tiktok_domain:
    type: http
    interval: 86400
    behavior: domain
    format: mrs
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/tiktok.mrs"
  
  cn_domain:
    type: http
    interval: 86400
    behavior: domain
    format: mrs
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/cn.mrs"
  
  cn_ip:
    type: http
    interval: 86400
    behavior: ipcidr
    format: mrs
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geoip/cn.mrs"

# --- 6. åˆ†æµè§„åˆ™ ---
rules:
  - DOMAIN-SUFFIX,xxttq.com,DIRECT
  - RULE-SET,private_domain,DIRECT
  - RULE-SET,ai,ğŸ¤– AI
  - RULE-SET,github_domain,ğŸ‘¨ğŸ¿â€ğŸ’» GitHub
  - RULE-SET,youtube_domain,ğŸ“¹ YouTube
  - RULE-SET,google_domain,ğŸ€ Google
  - RULE-SET,onedrive_domain,ğŸ¬ OneDrive
  - RULE-SET,microsoft_domain,ğŸªŸ Microsoft
  - RULE-SET,tiktok_domain,ğŸµ TikTok
  - RULE-SET,telegram_domain,ğŸ“² Telegram
  - RULE-SET,spotify,ğŸµ Spotify
  - RULE-SET,emby,ğŸ¬ Emby
  - RULE-SET,netflix_domain,ğŸ¥ NETFLIX
  - RULE-SET,apple_domain,DIRECT
  - RULE-SET,proxylite,ğŸš€ é»˜è®¤ä»£ç†
  - RULE-SET,cn_domain,DIRECT
  - RULE-SET,cn_ip,DIRECT
  - MATCH,ğŸŸ æ¼ç½‘ä¹‹é±¼
[custom]
; ===================================================
; 1. è§„åˆ™é›†é…ç½® (Blackmatrix7 + IPv6 æµ‹è¯•ä¼˜åŒ–)
; ===================================================

; --- å¼ºåˆ¶å›½å†… IPv6 ç›´è¿ (é€Ÿåº¦æœ€å¿«) ---
ruleset=ğŸ¯ å…¨çƒç›´è¿,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/ChinaIPs/ChinaIPs_IPv6.list

; --- å±€åŸŸç½‘ä¸åŸºç¡€ç›´è¿ ---
ruleset=ğŸ¯ å…¨çƒç›´è¿,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Lan/Lan.list
ruleset=ğŸ¯ å…¨çƒç›´è¿,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/GoogleCN/GoogleCN.list
ruleset=ğŸ¯ å…¨çƒç›´è¿,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/SteamCN/SteamCN.list

; --- å¹¿å‘Šä¸éšç§ ---
ruleset=ğŸ›‘ å¹¿å‘Šæ‹¦æˆª,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Advertising/Advertising.list
ruleset=ğŸƒ åº”ç”¨å‡€åŒ–,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Privacy/Privacy.list

; --- å…³é”®åº”ç”¨åˆ†æµ ---
ruleset=ğŸ¤– AI,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/GenerativeAI/GenerativeAI.list
ruleset=ğŸ“¹ YouTube,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/YouTube/YouTube.list
ruleset=ğŸ€ Google,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Google/Google.list
ruleset=ğŸ¬ OneDrive,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/OneDrive/OneDrive.list
ruleset=ğŸªŸ Microsoft,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Microsoft/Microsoft.list
ruleset=ğŸ Apple,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Apple/Apple.list
ruleset=ğŸ“² Telegram,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Telegram/Telegram.list
ruleset=ğŸ¥ Netflix,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Netflix/Netflix.list
ruleset=ğŸµ Spotify,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Spotify/Spotify.list
ruleset=ğŸµ TikTok,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/TikTok/TikTok.list
ruleset=ğŸ“¢ FCM,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/GoogleFCM/GoogleFCM.list
ruleset=ğŸ¥ Emby,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Emby/Emby.list

; --- åª’ä½“åˆ†æµ ---
ruleset=ğŸï¸ å›½å†…åª’ä½“,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/ChinaMedia/ChinaMedia.list
ruleset=ğŸŒ å›½å¤–åª’ä½“,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/GlobalMedia/GlobalMedia.list

; --- åœ°åŒºä¸å…œåº• ---
ruleset=ğŸ¯ å…¨çƒç›´è¿,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/China/China.list
ruleset=ğŸ¯ å…¨çƒç›´è¿,[]GEOSITE,CN
ruleset=ğŸš€ èŠ‚ç‚¹é€‰æ‹©,[]GEOSITE,gfw
ruleset=ğŸš€ èŠ‚ç‚¹é€‰æ‹©,[]GEOSITE,geolocation-!cn
ruleset=ğŸ¯ å…¨çƒç›´è¿,[]GEOIP,CN

; --- [å…³é”®ä¿®æ”¹] å›½å¤– IPv6 è¯†åˆ« ---
; è¯†åˆ«æ‰€æœ‰å‰©ä½™çš„ IPv6 æµé‡ï¼ŒæŠŠå®ƒæ‰”ç»™â€œIPv6 æµ‹è¯•â€ç­–ç•¥ç»„
ruleset=ğŸ›¡ï¸ IPv6 æµ‹è¯•,[]IP-CIDR6,::/0

; æœ€åå…œåº•
ruleset=ğŸŸ æ¼ç½‘ä¹‹é±¼,[]FINAL


; ===================================================
; 2. ç­–ç•¥ç»„å®šä¹‰ (åˆ†ç»„å·²å®Œæ•´ä¿ç•™)
; ===================================================

; è‡ªåŠ¨æµ‹é€Ÿ (ä¸»å…¥å£)
custom_proxy_group=â™»ï¸ è‡ªåŠ¨é€‰æ‹©`url-test`.*`http://www.google.com/generate_204`300,,50

; èŠ‚ç‚¹é€‰æ‹© (ä¸»å…¥å£)
custom_proxy_group=ğŸš€ èŠ‚ç‚¹é€‰æ‹©`select`[]â™»ï¸ è‡ªåŠ¨é€‰æ‹©`[]ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹`[]ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹`[]ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡èŠ‚ç‚¹`[]ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹`[]ğŸŒ å…¶ä»–åœ°åŒº`[]ğŸ¸ æ‰‹åŠ¨åˆ‡æ¢`[]DIRECT

; --- [å…³é”®ä¿®æ”¹] IPv6 æµ‹è¯•ä¸“ç”¨ç»„ ---
; 1. åå­—æ˜ç¡®ä¸ºâ€œIPv6 æµ‹è¯•â€ã€‚
; 2. åŒ…å« .* (è‡ªåŠ¨æ‹‰å–æ‰€æœ‰èŠ‚ç‚¹)ã€‚
; 3. æµ‹è¯•é“¾æ¥æ˜¯ ipv6.google.comã€‚
; 4. ä½¿ç”¨æ–¹æ³•ï¼šç‚¹å¼€è¿™ä¸ªç»„ï¼ŒæŒ‰æµ‹é€Ÿï¼Œç»¿è‰²çš„å°±æ˜¯é€šçš„ã€‚
custom_proxy_group=ğŸ›¡ï¸ IPv6 æµ‹è¯•`select`[]REJECT`[]DIRECT`.*`http://ipv6.google.com/generate_204`300

; --- å…¶ä»–åŸæœ‰åˆ†ç»„ (å®Œå…¨ä¿ç•™) ---
custom_proxy_group=ğŸ¤– AI`select`[]ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡èŠ‚ç‚¹`[]ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹`[]ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹`[]ğŸŒ å…¶ä»–åœ°åŒº`[]ğŸš€ èŠ‚ç‚¹é€‰æ‹©`[]ğŸ¸ æ‰‹åŠ¨åˆ‡æ¢
custom_proxy_group=ğŸ¥ Netflix`select`[]ğŸ¥ å¥ˆé£èŠ‚ç‚¹`[]ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡èŠ‚ç‚¹`[]ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹`[]ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹`[]ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹`[]ğŸš€ èŠ‚ç‚¹é€‰æ‹©`[]ğŸ¸ æ‰‹åŠ¨åˆ‡æ¢
custom_proxy_group=ğŸ€ Google`select`[]ğŸš€ èŠ‚ç‚¹é€‰æ‹©`[]ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹`[]ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹`[]ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡èŠ‚ç‚¹`[]ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹`[]ğŸŒ å…¶ä»–åœ°åŒº`[]ğŸ¸ æ‰‹åŠ¨åˆ‡æ¢`[]DIRECT
custom_proxy_group=ğŸ“¹ YouTube`select`[]ğŸš€ èŠ‚ç‚¹é€‰æ‹©`[]ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹`[]ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹`[]ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡èŠ‚ç‚¹`[]ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹`[]ğŸŒ å…¶ä»–åœ°åŒº`[]ğŸ¸ æ‰‹åŠ¨åˆ‡æ¢`[]DIRECT
custom_proxy_group=ğŸ¬ OneDrive`select`[]ğŸ¯ å…¨çƒç›´è¿`[]ğŸš€ èŠ‚ç‚¹é€‰æ‹©`[]DIRECT
custom_proxy_group=ğŸªŸ Microsoft`select`[]ğŸ¯ å…¨çƒç›´è¿`[]ğŸš€ èŠ‚ç‚¹é€‰æ‹©`[]DIRECT
custom_proxy_group=ğŸ Apple`select`[]ğŸ¯ å…¨çƒç›´è¿`[]ğŸš€ èŠ‚ç‚¹é€‰æ‹©`[]DIRECT
custom_proxy_group=ğŸ“² Telegram`select`[]ğŸš€ èŠ‚ç‚¹é€‰æ‹©`[]ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡èŠ‚ç‚¹`[]ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹`[]ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹`[]ğŸ¸ æ‰‹åŠ¨åˆ‡æ¢
custom_proxy_group=ğŸµ Spotify`select`[]ğŸš€ èŠ‚ç‚¹é€‰æ‹©`[]ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹`[]ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹`[]ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡èŠ‚ç‚¹`[]ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹`[]ğŸŒ å…¶ä»–åœ°åŒº`[]ğŸ¸ æ‰‹åŠ¨åˆ‡æ¢`[]DIRECT
custom_proxy_group=ğŸµ TikTok`select`[]ğŸš€ èŠ‚ç‚¹é€‰æ‹©`[]ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹`[]ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹`[]ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡èŠ‚ç‚¹`[]ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹`[]ğŸŒ å…¶ä»–åœ°åŒº`[]ğŸ¸ æ‰‹åŠ¨åˆ‡æ¢`[]DIRECT
custom_proxy_group=ğŸ“¢ FCM`select`[]ğŸš€ èŠ‚ç‚¹é€‰æ‹©`[]ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹`[]ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹`[]ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡èŠ‚ç‚¹`[]ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹`[]ğŸŒ å…¶ä»–åœ°åŒº`[]ğŸ¸ æ‰‹åŠ¨åˆ‡æ¢`[]DIRECT
custom_proxy_group=ğŸ¥ Emby`select`[]ğŸš€ èŠ‚ç‚¹é€‰æ‹©`[]ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹`[]ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹`[]ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡èŠ‚ç‚¹`[]ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹`[]ğŸŒ å…¶ä»–åœ°åŒº`[]ğŸ¸ æ‰‹åŠ¨åˆ‡æ¢`[]DIRECT
custom_proxy_group=ğŸŒ å›½å¤–åª’ä½“`select`[]ğŸš€ èŠ‚ç‚¹é€‰æ‹©`[]ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹`[]ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹`[]ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡èŠ‚ç‚¹`[]ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹`[]ğŸ¸ æ‰‹åŠ¨åˆ‡æ¢`[]DIRECT
custom_proxy_group=ğŸï¸ å›½å†…åª’ä½“`select`[]DIRECT`[]ğŸš€ èŠ‚ç‚¹é€‰æ‹©`[]ğŸ¸ æ‰‹åŠ¨åˆ‡æ¢
custom_proxy_group=ğŸ¯ å…¨çƒç›´è¿`select`[]DIRECT`[]ğŸš€ èŠ‚ç‚¹é€‰æ‹©`[]ğŸ¸ æ‰‹åŠ¨åˆ‡æ¢
custom_proxy_group=ğŸ›‘ å¹¿å‘Šæ‹¦æˆª`select`[]REJECT`[]DIRECT
custom_proxy_group=ğŸƒ åº”ç”¨å‡€åŒ–`select`[]REJECT`[]DIRECT
custom_proxy_group=ğŸŸ æ¼ç½‘ä¹‹é±¼`select`[]ğŸš€ èŠ‚ç‚¹é€‰æ‹©`[]ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹`[]ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹`[]ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡èŠ‚ç‚¹`[]ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹`[]ğŸŒ å…¶ä»–åœ°åŒº`[]ğŸ¸ æ‰‹åŠ¨åˆ‡æ¢`[]DIRECT

; --- æ­£åˆ™ç­›é€‰ (å®Œå…¨ä¿ç•™) ---
custom_proxy_group=ğŸ¸ æ‰‹åŠ¨åˆ‡æ¢`select`.*
custom_proxy_group=ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹`select`(?=.*(é¦™æ¸¯|HK|Hong Kong|ğŸ‡­ğŸ‡°|HongKong))^((?!(æ·±æ¸¯|US|å®¶å®½|æ¸¸æˆ|å‰©ä½™|æµé‡|2.0|2å€|2x|3.0|3å€|3x|4.0|4å€|4x)).)*$
custom_proxy_group=ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹`select`(?=.*(æ—¥æœ¬|å·æ—¥|ä¸œäº¬|å¤§é˜ª|æ³‰æ—¥|åŸ¼ç‰|æ²ªæ—¥|æ·±æ—¥|JP|Japan))^((?!(å®¶å®½|æ¸¸æˆ|å‰©ä½™|æµé‡|2.0|2å€|2x|3.0|3å€|3x|4.0|4å€|4x)).)*$
custom_proxy_group=ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡èŠ‚ç‚¹`select`(?=.*(æ–°åŠ å¡|å¡|ç‹®åŸ|SG|Singapore))^((?!(å®¶å®½|æ¸¸æˆ|å‰©ä½™|æµé‡|2.0|2å€|2x|3.0|3å€|3x|4.0|4å€|4x)).)*$
custom_proxy_group=ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹`select`(ç¾|æ³¢ç‰¹å…°|è¾¾æ‹‰æ–¯|ä¿„å‹’å†ˆ|å‡¤å‡°åŸ|è´¹åˆ©è’™|ç¡…è°·|æ‹‰æ–¯ç»´åŠ æ–¯|æ´›æ‰çŸ¶|åœ£ä½•å¡|åœ£å…‹æ‹‰æ‹‰|è¥¿é›…å›¾|èŠåŠ å“¥|US|United States)
custom_proxy_group=ğŸŒ å…¶ä»–åœ°åŒº`select`(^(?!.*(é¦™æ¸¯|HK|Hong Kong|ğŸ‡­ğŸ‡°|HongKong|æ—¥æœ¬|å·æ—¥|ä¸œäº¬|å¤§é˜ª|æ³‰æ—¥|åŸ¼ç‰|æ²ªæ—¥|æ·±æ—¥|JP|Japan|æ–°åŠ å¡|å¡|ç‹®åŸ|SG|Singapore)).*)
custom_proxy_group=ğŸ¥ å¥ˆé£èŠ‚ç‚¹`select`(NF|å¥ˆé£|è§£é”|Netflix|NETFLIX|Media)

enable_rule_generator=true
overwrite_original_rules=true
